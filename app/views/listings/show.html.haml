#carousel-container.row.fight-navbar-margin
  .col-md-12
    #listing-slideshow.carousel.slide{"data-ride" => "carousel"}
      / Indicators
      %ol.carousel-indicators
        - @listing.pictures.each_with_index do |pic, index|
          - if index == 0
            %li.active{"data-slide-to" => "#{index}", "data-target" => "#listing-slideshow"}
          - else
            %li{"data-slide-to" => "#{index}", "data-target" => "#listing-slideshow"}
      / Wrapper for slides
      .carousel-inner{:role => "listbox"}
        - @listing.pictures.each_with_index do |pic, index|
          - if index == 0
            .item.active
              = image_tag pic.image.url(:original), :class => "img-responsive"
          - else
            .item
              = image_tag pic.image.url(:original), :class => "img-responsive"
      / Controls
      %a.left.carousel-control{"data-slide" => "prev", :href => "#listing-slideshow", :role => "button"}
        %span.glyphicon.glyphicon-chevron-left{"aria-hidden" => "true"}
        %span.sr-only Previous
      %a.right.carousel-control{"data-slide" => "next", :href => "#listing-slideshow", :role => "button"}
        %span.glyphicon.glyphicon-chevron-right{"aria-hidden" => "true"}
        %span.sr-only Next

#listing-details.col-md-12
  .col-md-12
    .col-md-12
      .row
        .col-md-7
          .panel.panel-default
            .panel-body
              %h5
                = @listing.name
                %br
                %br
                %small
                  = "#{@listing.location.city}, #{@listing.location.state}"
        .col-md-5
          .panel.panel-default
            .panel-body
                
    .col-md-4
      .panel.panel-default
        .panel-body
          .col-md-12.text-center
            / Profile picture will go here
            %h5
              = @listing.user.first_name
      .panel.panel-default
        .panel-body
          %h5
            = @listing.location.street_address
          %h6
            = "#{@listing.location.city}, #{@listing.location.state}, #{@listing.location.zip}"
    .col-md-8
      .panel.panel-default
        .panel-body
          = raw(@listing.description)
.row
  #google-map
    .col-md-12
      #map
= render 'layouts/footer'
    


:javascript
  handler = Gmaps.build('Google');
  handler.buildMap({ internal: {id: 'map'}, provider: { scrollwheel: false }}, function(){
    var markers = handler.addMarkers(#{@coordinate});
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
    handler.getMap().setZoom(14);
  });